# query_parse: 解析子系统

## 文件结构

```
-文件 query_parse
	-辅助函数
		-split_into_tokens
		-infix_to_postfix
	-功能函数
		-term_to_doc_ids
		-cal_doc_ids
		-parse_query
```

## 简要介绍

   1. parse_query获取从do_search模块传来的词条，并判断其类型
      1. 如果开头为"EXACTLY: "，则为精确、逻辑查询：
         1. 调用两个辅助函数将查询语句解析并转化为后缀逻辑表达式；
         2. 调用`cal_doc_ids()`，创建一个解析栈，并遍历上一步创立的后缀逻辑表达式
            1. 如果是查询词，调用`term_to_doc_ids()`获取相关文档列表，转换为集合压入栈中；
            2. 如果是逻辑运算符，栈顶的两项出栈，对集合进行对应的操作后入栈；
         3. 最终栈中只有一项，将其出栈并作为结果返回；
      2. 否则为普通查询：
         1. 对query进行分词；
         2. 根据分词结果，调用`term_to_doc_ids()`获取相关文档，作为结果返回；
         3. 检查分词结果的idf值并排序，筛选出超过一定阈值的词，作为排序依据额外返回。